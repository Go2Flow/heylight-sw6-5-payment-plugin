!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=(window.__sw__.assetPath + '/bundles/go2flowheidipaypayment/'),n(n.s="NSJk")}({"+xsZ":function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,s=void 0,s=function(e,t){if("object"!==n(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!==n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(s)?s:String(s)),r)}var o,s}function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=c(e);if(t){var r=c(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return a(this,n)}}function a(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=Shopware.Application,u=Shopware.Classes.ApiService,d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,e);var t,n,a,c=s(l);function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"heidipay_order_service";return i(this,l),c.call(this,e,t,n)}return t=l,(n=[{key:"submitRefund",value:function(e){var t=this.getBasicHeaders();return this.httpClient.post("_action/".concat(this.getApiBasePath(),"/refund"),{transaction:e},{headers:t}).then((function(e){return u.handleResponse(e)}))}}])&&r(t.prototype,n),a&&r(t,a),Object.defineProperty(t,"prototype",{writable:!1}),l}(u);l.addServiceProvider("HeidiPayOrderService",(function(e){var t=l.getContainer("init");return new d(t.httpClient,e.loginService)}))},"1dce":function(e,t,n){},Etpw:function(e,t){e.exports='<svg id="svg235" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 273.45 277.85"><g id="layer1"><path id="path48" d="M33.59,229.47c3.67,1.35,7.11,2.75,10.56,3.93,31.67,10.73,51.78-4.83,61.95-29.76,3.73-9.76,6.89-19.74,9.45-29.88,3.86-15.89,19.72-25.61,35.45-21.73,5.27,.63,9.51,4.67,10.45,9.94,.84,6.13,1.34,12.29,1.5,18.48,.28,5,0,10.05,.5,14.94,.55,8.91,8.15,15.69,16.97,15.13,2.83-.18,5.56-1.12,7.92-2.72,5.08-3.45,9.31-8.02,12.39-13.37,7.83-12.8,9.67-27.63,11.11-42.29,1.45-14.66,2.22-30.21,3.78-45.32,.69-5.27,2.06-10.42,4.06-15.33,4.1-11.89,16.95-18.18,28.72-14.04,3.67,1.29,6.94,3.51,9.51,6.46,7.37,8.52,12.01,19.09,13.33,30.33,12.69,70.63-30.12,139.35-98.62,158.31-52.56,14.04-98.18,0-136.35-39.31-.83-.84-1.55-1.8-2.33-2.75-.78-.96-.17-.39-.33-1.01h0Z"></path><path id="path2" d="M146.16,0c7.06,1.24,14.22,2.08,21.22,3.71,26.86,6.17,51.23,20.47,69.84,41,1.02,1.04,1.78,2.31,2.22,3.71l-3.5-1.46c-10.1-4.91-21.36-6.85-32.5-5.62-13.87,2.42-25.78,11.34-32.11,24.04-6.24,11.98-10.8,24.77-13.56,38.02-3.34,15.32-18.06,25.24-33.34,22.46-6.8-.15-12.41-5.45-13-12.3-.66-6.02-.96-12.08-.89-18.14,0-4.1,0-8.26-.33-12.3-.43-9.29-8.24-16.48-17.43-16.04-3.61,.17-7.07,1.52-9.85,3.85-4.48,3.73-8.2,8.31-10.95,13.48-6.31,12.49-9.89,26.2-10.5,40.21-1.55,15.05-2.17,30.21-3.72,45.32-.73,5.56-2.12,11.01-4.17,16.23-4.15,11.94-17.09,18.22-28.9,14.02-3.91-1.39-7.36-3.83-9.99-7.06-7.91-10.06-12.58-22.33-13.39-35.16C-7.98,90.24,32.93,25.75,97.71,6.01c8.42-2.17,16.95-3.9,25.56-5.17L127.21,0h18.95Z"></path></g></svg>'},Ft0j:function(e){e.exports=JSON.parse('{"sw-order":{"list":{"heidipay_reference":"Heidipay Reference"}}}')},NSJk:function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,s=void 0,s=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===i(s)?s:String(s)),r)}var o,s}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=l(e);if(t){var r=l(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return c(this,n)}}function c(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.r(t);var u,d=Shopware.Classes.ApiService,p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(l,e);var t,n,i,c=a(l);function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"heidipay_api_service";return r(this,l),c.call(this,e,t,n)}return t=l,(n=[{key:"get",value:function(e){return this.httpClient.get("_action/".concat(this.getApiBasePath()).concat(e),{headers:this.getBasicHeaders()}).then((function(e){return d.handleResponse(e)}))}},{key:"post",value:function(e,t){return this.httpClient.post("_action/".concat(this.getApiBasePath()).concat(e),t,{headers:this.getBasicHeaders()}).then((function(e){return d.handleResponse(e)}))}}])&&o(t.prototype,n),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),l}(d),f=(n("hpf2"),n("+xsZ"),(u=n("X5mL")).keys().reduce((function(e,t){var n={name:t.split(".")[1].split("/")[1],functional:!0,render:function(e,n){var i=n.data;return e("span",{class:[i.staticClass,i.class],style:i.style,attrs:i.attrs,on:i.on,domProps:{innerHTML:u(t)}})}};return e.push(n),e}),[])),h=Shopware.Component;f.map((function(e){return h.register(e.name,e)}));Shopware.Component.register("heidipay-settings-icon",{template:'{% block heidipay_settings_icon %}\n    <icons-heidipay-color class="sw-icon"></icons-heidipay-color>\n{% endblock %}\n'});n("maUU");Shopware.Component.override("sw-settings-index",{template:'{% block sw_settings_content_card_slot_plugins %}\n    {% parent %}\n\n    <sw-settings-item :label="$tc(\'HeidiPay.mainMenuItemGeneral\')"\n                      :to="{ name: \' heidipay.settings.index\' }"\n                      :backgroundEnabled="false">\n        <template #icon>\n            <img class="sw-settings-index__heidipay-icon" :src="\'heidipay/administration/plugin.png\' | asset">\n        </template>\n    </sw-settings-item>\n{% endblock %}\n'});n("dKpM");function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o,s,a=[],c=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(a.push(i.value),a.length!==t);c=!0);}catch(e){l=!0,r=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw r}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var g=Shopware,b=g.Component,v=g.Mixin;b.register("heidipay-settings",{template:'{% block heidipay_settings %}\n<sw-page class="heidipay-settings">\n    {% block heidipay_settings_header %}\n    <template slot="smart-bar-header">\n        <h2>\n            {{ $tc(\'sw-settings.index.title\') }}\n            <sw-icon name="small-arrow-medium-right" small></sw-icon>\n            {{ $tc(\'HeidiPay.mainMenuItemGeneral\') }}\n        </h2>\n    </template>\n    {% endblock %}\n    {% block heidipay_actions %}\n    <template slot="smart-bar-actions">\n        {% block heidipay_settings_actions_feedback %}\n        <sw-button\n            @click="isSupportModalOpen = true"\n            :disabled="false"\n            variant="ghost"\n            :square="false"\n            :block="false"\n            :isLoading="false">\n            {{ $tc(\'HeidiPay.supportModal.supportButton\') }}\n        </sw-button>\n        {% endblock %}\n        {% block heidipay_settings_actions_test %}\n        <sw-button-process @click="onTest"\n                           :isLoading="isTesting"\n                           :processSuccess="isTestSuccessful"\n                           :disabled="isLoading">\n            {{ $tc(\'HeidiPay.settingsForm.test\') }}\n        </sw-button-process>\n        {% endblock %}\n\n\n        {% block heidipay_settings_actions_save %}\n        <sw-button-process\n            class="sw-settings-login-registration__save-action"\n            :isLoading="isLoading"\n            :processSuccess="isSaveSuccessful"\n            :disabled="isLoading || isTesting"\n            variant="primary"\n            @process-finish="saveFinish"\n            @click="onSave">\n            {{ $tc(\'HeidiPay.settingsForm.save\') }}\n        </sw-button-process>\n        {% endblock %}\n    </template>\n    {% endblock %}\n    {% block heidipay_settings_content %}\n    <template #content>\n        <sw-modal\n            v-if="isSupportModalOpen"\n            @modal-close="isSupportModalOpen = false"\n            :title="$tc(\'HeidiPay.supportModal.title\')"\n            class="heidpay-support sw-modal--medium">\n            <sw-container columns="1fr 1fr">\n                <div class="heidpay-support__col">\n                    <div class="heidpay-support__icon">\n                        <sw-icon name="default-documentation-file" :large="true"></sw-icon>\n                    </div>\n                    <p class="heidpay-support__desc">\n                        {{ $tc(\'HeidiPay.supportModal.manualDesc\') }}\n                    </p>\n                    <sw-button\n                        :disabled="false"\n                        variant="primary"\n                        :square="false"\n                        :block="false"\n                        :isLoading="false"\n                        link="https://www.heidipay.com/de-ch/">\n                        {{ $tc(\'HeidiPay.supportModal.manualButton\') }}\n                    </sw-button>\n                </div>\n                <div class="heidpay-support__col">\n                    <div class="heidpay-support__icon">\n                        <sw-icon name="default-device-headset" :large="true"></sw-icon>\n                    </div>\n                    <p class="heidpay-support__desc">\n                        {{ $tc(\'HeidiPay.supportModal.supportDesc\') }}\n                    </p>\n                    <sw-button\n                        :disabled="false"\n                        variant="primary"\n                        :square="false"\n                        :block="false"\n                        :isLoading="false"\n                        link="mailto:kontakt@go2flow.ch">\n                        {{ $tc(\'HeidiPay.supportModal.supportButton\') }}\n                    </sw-button>\n                </div>\n            </sw-container>\n        </sw-modal>\n\n        <sw-card-view>\n            <div class="sw-system-config">\n                <div  class="sw-system-config__global-sales-channel-switch">\n                    <h3>{{ $tc(\'HeidiPay.settingsForm.attention\') }}</h3>\n                    <p style="margin-bottom: 10px;">{{ $tc(\'HeidiPay.settingsForm.attentionText\') }}</p>\n                    <p style="margin-bottom: 10px;">{{ $tc(\'HeidiPay.settingsForm.descriptionWebservice\') }}</p>\n                    <p style="margin-bottom: 10px;"><a href="https://merchant-portal.heidipay.com/auth/login" target="_blank" rel="noopener nofollow">Merchant-Portal</a> </p>\n                </div>\n            </div>\n            <sw-system-config\n                ref="systemConfig"\n                salesChannelSwitchable\n                inherit\n                domain="Go2FlowHeidiPayPayment.settings">\n            </sw-system-config>\n        </sw-card-view>\n    </template>\n    {% endblock %}\n</sw-page>\n{% endblock %}\n\n',mixins:[v.getByName("notification"),v.getByName("sw-inline-snippet")],inject:["HeidiPaySettingsService"],data:function(){return{isLoading:!1,isTesting:!1,isSaveSuccessful:!1,isTestSuccessful:!1,HeidiSecretKey:!1,isSupportModalOpen:!1,validations:{heidiSecretKey:{required:!0},heidiPromotionPublicApiKey:{required:!0},heidiPromotionWidgetFee:{required:!0},heidiPromotionProductMode:{required:!0},heidiPromotionTerms:{required:!0},heidiPromotionTermsCredit:{required:!0}}}},methods:{saveFinish:function(){this.isSaveSuccessful=!1},onSave:function(){var e=this;this.isLoading=!0;var t=this.validateConfig();if(t.length)return this.createNotificationsForValidation(t),void(this.isLoading=!1);this.isSaveSuccessful=!1,this.$refs.systemConfig.saveAll().then((function(){e.isLoading=!1,e.isSaveSuccessful=!0})).catch((function(){e.isLoading=!1}))},onTest:function(){var e=this;this.isTesting=!0,this.isTestSuccessful=!1;var t=this.getConfigValue("heidiSecretKey");this.HeidiPaySettingsService.validateApiCredentials(t).then((function(t){var n=t.credentialsValid;t.error;n?(e.createNotificationSuccess({title:e.$tc("HeidiPay.settingsForm.messages.titleSuccess"),message:e.$tc("HeidiPay.settingsForm.messages.messageTestSuccess")}),e.isTestSuccessful=!0):e.createNotificationError({title:e.$tc("HeidiPay.settingsForm.messages.titleError"),message:e.$tc("HeidiPay.settingsForm.messages.messageTestError")}),e.isTesting=!1})).catch((function(t){e.createNotificationError({title:e.$tc("HeidiPay.settingsForm.messages.titleError"),message:e.$tc("HeidiPay.settingsForm.messages.messageTestErrorGeneral")}),e.isTesting=!1}))},createNotificationsForValidation:function(e){var t=this;e.forEach((function(e){var n="",i=t.$tc("HeidiPay.settingsForm.fields."+e.field);e.errors.forEach((function(e){n=n+" "+t.$tc("HeidiPay.settingsForm.messages."+e,{field:i})})),t.createNotificationError({title:t.$tc("HeidiPay.settingsForm.messages.titleError"),message:n})}))},validateConfig:function(){for(var e=[],t=0,n=Object.entries(this.$refs.systemConfig.actualConfigData);t<n.length;t++)for(var i=y(n[t],2),r=i[0],o=i[1],s=0,a=Object.entries(this.validations);s<a.length;s++){var c=y(a[s],2),l=c[0],u=c[1],d=[],p=o["Go2FlowHeidiPayPayment.settings.".concat(l)];u.required&&(this.isSet(p,"null"!==r)||d.push("required")),d.length&&e.push({sci:r,field:l,errors:d})}return e},isSet:function(e,t){return""!==e&&(null!==e||t)&&(!Array.isArray(e)||e.length)},getConfigValue:function(e){var t=this.$refs.systemConfig.actualConfigData.null,n=this.$refs.systemConfig.currentSalesChannelId;return(null===n?t:this.$refs.systemConfig.actualConfigData[n])["Go2FlowHeidiPayPayment.settings.".concat(e)]||t["Go2FlowHeidiPayPayment.settings.".concat(e)]}}});var w=Shopware,P=w.Component,S=w.Mixin,_=(w.State,w.Context),k=Shopware.Component.getComponentHelper(),T=(k.mapPropertyErrors,k.mapGetters,k.mapState,Shopware.Data.Criteria);Shopware.Utils;P.register("heidipay-order-detail",{template:'{% block maximizly_shipping_detail %}\n\n<div class="sw-order-detail-heidipay">\n    <sw-card :title="$tc(\'HeidiPay.order.detail.actions\')">\n        <sw-button-process\n            class=""\n            :isLoading="isLoading"\n            :disabled="isLoading || !buttonEnabled"\n            variant="primary"\n            @click.prevent="submitRefund">\n            {{ $tc(\'HeidiPay.order.detail.actions_refund\') }}\n        </sw-button-process>\n    </sw-card>\n</div>\n\n{% endblock %}\n',inject:["repositoryFactory","HeidiPayOrderService"],mixins:[S.getByName("notification")],metaInfo:function(){return{title:"Heidipay"}},data:function(){return{isLoading:!0,transaction:null}},computed:{buttonEnabled:function(){return!(null===this.transaction||"cancelled"===this.transaction.stateMachineState.technicalName||"refunded"===this.transaction.stateMachineState.technicalName||this.transaction.amount.totalPrice<=0)}},created:function(){this.loadOrderData()},methods:{submitRefund:function(){var e=this;this.isLoading=!0,this.HeidiPayOrderService.submitRefund(this.$route.params.transaction).then((function(t){t.success?e.createNotificationSuccess({title:e.$tc("HeidiPay.order.messages.refundSuccessTitle"),message:e.$tc("HeidiPay.order.messages.refundSuccessMessage")}):e.createNotificationError({title:e.$tc("HeidiPay.order.messages.refundErrorTitle"),message:e.$tc("HeidiPay.order.messages.refundErrorMessage")})})).catch((function(e){console.error(e)})).finally((function(){e.loadOrderData()}))},loadOrderData:function(){var e=this,t=this.repositoryFactory.create("order_transaction"),n=new T(1,1);return n.addAssociation("order"),n.addAssociation("order.lineItems"),t.get(this.$route.params.transaction,_.api,n).then((function(t){e.transaction=t,e.isLoading=!1}))}}});var O=n("ciul"),C=n("ytcj");Shopware.Module.register("heidipay-heidipay",{type:"plugin",name:"HeidiPay",title:"HeidiPay.mainMenuItemGeneral",version:"1.0.0",targetVersion:"1.0.0",color:"#2b52ff",icon:"default-action-settings",snippets:{"de-DE":O,"de-CH":O,"en-GB":C},routes:{index:{component:"heidipay-settings",path:"index",meta:{parentPath:"sw.settings.index"}}},settingsItem:{name:"heidipay-settings",group:"plugins",to:"heidipay.heidipay.index",iconComponent:"heidipay-settings-icon",backgroundEnabled:!0},routeMiddleware:function(e,t){"sw.order.detail"===t.name&&t.children.push({component:"heidipay-order-detail",name:"heidipay.order.detail",path:"/sw/order/detail/:id/heidipay/:transaction",meta:{parentPath:"sw.order.index",privilege:"order.viewer"}}),e(t)}});var H=n("Ft0j"),E=n("ulsX");Shopware.Component;Shopware.Locale.extend("de-DE",H),Shopware.Locale.extend("en-GB",E),Shopware.Component.override("sw-order-list",{template:'{% block sw_order_list_grid_columns %}\n    {% parent() %}\n\n    {% block sw_order_list_grid_columns_heidipay_reference %}\n        <template #column-id="{ item }">\n            {{ getheidiPayReference(item)}}\n        </template>\n    {% endblock %}\n\n{% endblock %}',methods:{getOrderColumns:function(){var e=this.$super("getOrderColumns");return e.push({property:"id",label:"sw-order.list.heidipay_reference",align:"left"}),e},getheidiPayReference:function(e){if(e.transactions.length&&e.transactions.find((function(e){return e.customFields&&e.customFields.external_contract_uuid})))return"HP_"+e.orderNumber;return"-"}}});var j=Shopware,M=j.Component,x=j.Context,A=Shopware.Data.Criteria;M.override("sw-order-detail",{template:'{% block sw_order_detail_content_tabs_general %}\n    {% parent %}\n\n    <template v-for="transaction in heidipayTransactions">\n        {% block heidipay_payment_payment_tab %}\n            <sw-tabs-item :route="{ name: \'heidipay.order.detail\', params: { id: $route.params.id, transaction: transaction.id } }" title="Heidipay">\n                {{ $tc(\'HeidiPay.order.detail.tab\') }}\n            </sw-tabs-item>\n        {% endblock %}\n    </template>\n\n{% endblock %}\n',data:function(){return{heidipayTransactions:[]}},watch:{orderId:{deep:!0,handler:function(){this.heidipayTransactions=[],this.orderId&&this.loadOrderData()},immediate:!0}},methods:{loadOrderData:function(){var e=this,t=this.repositoryFactory.create("order"),n=new A(1,1);return n.addAssociation("transactions"),n.addAssociation("transactions.paymentMethod"),t.get(this.$route.params.id,x.api,n).then((function(t){e.loadTransactions(t)}))},loadTransactions:function(e){var t=this;e.transactions.forEach((function(e){"heidipay_heidipay"===e.paymentMethod.technicalName&&t.heidipayTransactions.push(e)}))}}});var R=Shopware.Application,F=R.getContainer("init");R.addServiceProvider("HeidiPayAPIService",(function(e){return new p(F.httpClient,e.loginService)}))},P8hj:function(e,t,n){"use strict";function i(e,t){for(var n=[],i={},r=0;r<t.length;r++){var o=t[r],s=o[0],a={id:e+":"+r,css:o[1],media:o[2],sourceMap:o[3]};i[s]?i[s].parts.push(a):n.push(i[s]={id:s,parts:[a]})}return n}n.r(t),n.d(t,"default",(function(){return h}));var r="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!r)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var o={},s=r&&(document.head||document.getElementsByTagName("head")[0]),a=null,c=0,l=!1,u=function(){},d=null,p="data-vue-ssr-id",f="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function h(e,t,n,r){l=n,d=r||{};var s=i(e,t);return y(s),function(t){for(var n=[],r=0;r<s.length;r++){var a=s[r];(c=o[a.id]).refs--,n.push(c)}t?y(s=i(e,t)):s=[];for(r=0;r<n.length;r++){var c;if(0===(c=n[r]).refs){for(var l=0;l<c.parts.length;l++)c.parts[l]();delete o[c.id]}}}}function y(e){for(var t=0;t<e.length;t++){var n=e[t],i=o[n.id];if(i){i.refs++;for(var r=0;r<i.parts.length;r++)i.parts[r](n.parts[r]);for(;r<n.parts.length;r++)i.parts.push(g(n.parts[r]));i.parts.length>n.parts.length&&(i.parts.length=n.parts.length)}else{var s=[];for(r=0;r<n.parts.length;r++)s.push(g(n.parts[r]));o[n.id]={id:n.id,refs:1,parts:s}}}}function m(){var e=document.createElement("style");return e.type="text/css",s.appendChild(e),e}function g(e){var t,n,i=document.querySelector("style["+p+'~="'+e.id+'"]');if(i){if(l)return u;i.parentNode.removeChild(i)}if(f){var r=c++;i=a||(a=m()),t=w.bind(null,i,r,!1),n=w.bind(null,i,r,!0)}else i=m(),t=P.bind(null,i),n=function(){i.parentNode.removeChild(i)};return t(e),function(i){if(i){if(i.css===e.css&&i.media===e.media&&i.sourceMap===e.sourceMap)return;t(e=i)}else n()}}var b,v=(b=[],function(e,t){return b[e]=t,b.filter(Boolean).join("\n")});function w(e,t,n,i){var r=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=v(t,r);else{var o=document.createTextNode(r),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(o,s[t]):e.appendChild(o)}}function P(e,t){var n=t.css,i=t.media,r=t.sourceMap;if(i&&e.setAttribute("media",i),d.ssrId&&e.setAttribute(p,t.id),r&&(n+="\n/*# sourceURL="+r.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},Q9gl:function(e,t,n){},X5mL:function(e,t,n){var i={"./icons-heidipay-color.svg":"Etpw"};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=o,e.exports=r,r.id="X5mL"},ciul:function(e){e.exports=JSON.parse('{"HeidiPay":{"mainMenuItemGeneral":"HeidiPay","module":{"title":"HeidiPay","description":"Buy now, pay later."},"settingsForm":{"title":"HeidiPay","test":"Teste den API-Zugang","save":"Speichern","attention":"Wichtig","attentionText":"Damit das Plugin funktioniert, müssen alle * Pflichtfelder ausgefüllt und die korrekten Adressdaten hinterlegt sein.","descriptionWebservice":"Den Secret Key bekommen Sie direkt von Heidipay zugewiesen und zugeschickt. Falls Sie diese noch nicht beantragt oder zugeschickt bekommen haben, können Sie diese unter nachfolgendem Link bestellen: ","fields":{"heidiSecretKey":"Secret API Key","heidiPromotionPublicApiKey":"Public API Key","heidiPromotionWidgetFee":"Gebühr","heidiPromotionProductMode":"Werbebotschaft Produkt","heidiPromotionTerms":"Anzahl der Raten (BNPL)","heidiPromotionTermsCredit":"Anzahl der Raten (Credit)"},"messages":{"required":"{field} darf nicht leer sein.","messageNotBlank":"Dieses Feld darf nicht leer sein.","titleSuccess":"Erfolg","titleError":"Fehler","titleMissing":"Pflichtfelder fehlen","messageMissing":"Bitte füllen Sie alle Pflichtfelder aus.","messageTestSuccess":"Die API-Zugangsdaten sind korrekt.","messageTestError":"Die API-Zugangsdaten sind falsch.","messageTestErrorGeneral":"Die API-Zugangsdaten konnten nicht verifiziert werden.","messageTestTitleEmpty":"Die API-Zugangsdaten sind leer.","messageTestErrorEmpty":"Die API-Zugangsdaten dürfen nicht leer sein.","messageSaveSuccess":"Die Plugin-Einstellungen wurden gespeichert.","messageSaveError":"Die Plugin-Einstellungen konnten nicht gespeichert werden."}},"supportModal":{"supportButton":"Support","title":"Wie können wir Ihnen helfen?","supportDesc":"Kontaktieren Sie unser Support-Team","manualButton":"Dokumentation","manualDesc":"Lesen Sie unsere Integrations Anleitung"},"order":{"detail":{"actions":"Aktionen","actions_refund":"Rückerstatten","tab":"Heidipay"},"messages":{"refundSuccessTitle":"Rückerstattung erfolgreich!","refundSuccessMessage":"Die Rückerstattung wurde erfolgreich verarbeitet","refundErrorTitle":"Rückerstattung fehlgeschlagen!","refundErrorMessage":"Bitte versuchen Sie es erneut oder wenden Sie sich an den Heidipay-Support"}}}}')},dKpM:function(e,t,n){var i=n("1dce");i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,n("P8hj").default)("1bbaba1c",i,!0,{})},hpf2:function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,s=void 0,s=function(e,t){if("object"!==n(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!==n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(s)?s:String(s)),r)}var o,s}function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=c(e);if(t){var r=c(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return a(this,n)}}function a(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=Shopware.Application,u=Shopware.Classes.ApiService,d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,e);var t,n,a,c=s(l);function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"heidipay_settings_service";return i(this,l),c.call(this,e,t,n)}return t=l,(n=[{key:"validateApiCredentials",value:function(e){var t=this.getBasicHeaders();return this.httpClient.post("_action/".concat(this.getApiBasePath(),"/validate-api-credentials"),{merchant_key:e},{headers:t}).then((function(e){return u.handleResponse(e)}))}}])&&r(t.prototype,n),a&&r(t,a),Object.defineProperty(t,"prototype",{writable:!1}),l}(u);l.addServiceProvider("HeidiPaySettingsService",(function(e){var t=l.getContainer("init");return new d(t.httpClient,e.loginService)}))},maUU:function(e,t,n){var i=n("Q9gl");i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,n("P8hj").default)("c04677fc",i,!0,{})},ulsX:function(e){e.exports=JSON.parse('{"sw-order":{"list":{"heidipay_reference":"Heidipay Reference"}}}')},ytcj:function(e){e.exports=JSON.parse('{"HeidiPay":{"mainMenuItemGeneral":"HeidiPay","module":{"title":"HeidiPay","description":"HeidiPay"},"settingsForm":{"title":"HeidiPay","test":"Test API-Credentials","save":"Save","attention":"Important","attentionText":"For the plugin to work, all *mandatory fields must be filled in and the correct address data must be stored.","descriptionWebservice":"The Client Secret Key will be assigned and sent to you directly by HeidiPay. If you have not yet requested or received them, you can order them at the following link: ","fields":{"heidiSecretKey":"Secret API Key","heidiPromotionPublicApiKey":"Public API Key","heidiPromotionWidgetFee":"Display price","heidiPromotionProductMode":"Promotion Product","heidiPromotionTerms":"Number of Instalments (BNPL)","heidiPromotionTermsCredit":"Number of Instalments (Credit)"},"messages":{"required":"{field} must not be empty.","messageNotBlank":"This Field must not be empty.","titleSuccess":"Success","titleError":"Error","titleMissing":"Required Fields","messageMissing":"Please fill out all required fields","messageTestSuccess":"The API credentials are correct.","messageTestError":"The API credentials are wrong.","messageTestErrorGeneral":"The API-Credentials could not be verified.","messageTestTitleEmpty":"The API credentials are empty.","messageTestErrorEmpty":"The API credentials cant be empty. please fill in the Secret Key.","messageSaveSuccess":"The plugin settings have been saved.","messageSaveError":"The plugin settings could not be saved."}},"supportModal":{"supportButton":"Support","title":"How Can We Help You?","supportDesc":"Contact our support team","manualButton":"Manual","manualDesc":"Read our integration manual"},"order":{"detail":{"actions":"Actions","actions_refund":"Refund","tab":"Heidipay"},"messages":{"refundSuccessTitle":"Refund successful!","refundSuccessMessage":"The refund was successfully processed","refundErrorTitle":"Refund failed!","refundErrorMessage":"Please try again or contact the Heidipay-Support"}}}}')}});
//# sourceMappingURL=go2-flow-heidi-pay-payment.js.map