!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=(window.__sw__.assetPath + '/bundles/go2flowheylightpayment/'),n(n.s="V/R6")}({"2Ajb":function(e){e.exports=JSON.parse('{"HeyLight":{"mainMenuItemGeneral":"HeyLight","module":{"title":"HeyLight","description":"HeyLight"},"settingsForm":{"title":"HeyLight","test":"Test API-Credentials","save":"Save","attention":"Important","attentionText":"For the plugin to work, all *mandatory fields must be filled in and the correct address data must be stored.","descriptionWebservice":"The Client Secret Key will be assigned and sent to you directly by HeyLight. If you have not yet requested or received them, you can order them at the following link: ","fields":{"secretKey":"Secret API Key","promotionPublicApiKey":"Public API Key","promotionWidgetFee":"Display price","promotionProductMode":"Promotion Product","promotionTerms":"Number of Instalments (BNPL)","promotionTermsCredit":"Number of Instalments (Credit)"},"messages":{"required":"{field} must not be empty.","messageNotBlank":"This Field must not be empty.","titleSuccess":"Success","titleError":"Error","titleMissing":"Required Fields","messageMissing":"Please fill out all required fields","messageTestSuccess":"The API credentials are correct.","messageTestError":"The API credentials are wrong.","messageTestErrorGeneral":"The API-Credentials could not be verified.","messageTestTitleEmpty":"The API credentials are empty.","messageTestErrorEmpty":"The API credentials cant be empty. please fill in the Secret Key.","messageSaveSuccess":"The plugin settings have been saved.","messageSaveError":"The plugin settings could not be saved."}},"supportModal":{"supportButton":"Support","title":"How Can We Help You?","supportDesc":"Contact our support team","manualButton":"Manual","manualDesc":"Read our integration manual"},"order":{"detail":{"actions":"Actions","actions_refund":"Refund","tab":"HeyLight"},"messages":{"refundSuccessTitle":"Refund successful!","refundSuccessMessage":"The refund was successfully processed","refundErrorTitle":"Refund failed!","refundErrorMessage":"Please try again or contact the HeyLight-Support"}}}}')},"4UUi":function(e,t,n){var r={"./icons-heylight-color.svg":"FnUR"};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id="4UUi"},"4uyt":function(e,t,n){},"9ogd":function(e,t,n){},FnUR:function(e,t){e.exports='<svg width="180" height="65" viewBox="0 0 180 65" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0 10C0 4.47715 4.47715 0 10 0H170C175.523 0 180 4.47715 180 10V55C180 60.5228 175.523 65 170 65H10C4.47716 65 0 60.5228 0 55V10Z" fill="black"></path><g clip-path="url(#clip0_495_4399)"><g clip-path="url(#clip1_495_4399)"><path d="M71.4328 42.7492L65.547 25.41H61.276L68.1915 45.5904H70.7738L69.5161 49.0977H63.0296V52.6256H68.1264C71.196 52.6256 72.8302 50.9898 73.6794 48.5234L81.6332 25.41H77.3758L71.4328 42.7492Z" fill="white"></path><path d="M103.555 18C102.034 18 100.774 19.2718 100.774 20.8049C100.774 22.3752 102.035 23.647 103.555 23.647C105.113 23.647 106.374 22.3752 106.374 20.8049C106.374 19.2718 105.113 18 103.555 18Z" fill="white"></path><path d="M105.624 25.4091H101.481V45.5884H105.624V25.4091Z" fill="white"></path><path d="M162.568 28.9496V25.4031H157.347V18.361H153.203V25.4031H149.887V28.9496H153.203V39.9922C153.203 43.2559 155.547 45.5912 158.745 45.5912H162.568V42.0545H157.347V28.9496H162.568Z" fill="white"></path><path d="M87.5394 18.361H83.2859V45.5883H99.3421V41.7072H87.5394V18.361Z" fill="white"></path><path d="M141.283 25.0323C137.875 25.0323 135.578 26.6779 134.737 29.1541V18.361H130.557V45.5893H134.737V35.39C134.737 31.2252 136.649 28.6346 140.236 28.6346C143.16 28.6346 144.564 30.3486 144.564 33.5498V45.5893H148.743V33.2886C148.743 28.1473 146.043 25.0323 141.283 25.0323Z" fill="white"></path><path d="M52.2731 25.0323C46.364 25.0323 42.4055 28.8821 42.4055 35.5271C42.4055 42.1974 46.4368 45.9464 52.44 45.9464C58.6917 45.9464 61.0761 41.8706 61.5701 38.8534H57.401C57.0477 40.7358 55.9851 42.4293 52.5924 42.4293C48.794 42.4293 46.8026 40.2838 46.6745 36.8067H61.5846V34.8745C61.5846 29.2725 58.4287 25.0323 52.2731 25.0323ZM46.6784 33.497C46.7881 31.0795 48.1904 28.5612 52.1052 28.5612C56.02 28.5612 57.4379 31.0795 57.5475 33.497H46.6784Z" fill="white"></path><path d="M35.721 29.7714H21.2904V18.361H17V45.5883H21.2904V33.6701H35.721V45.5883H40.0114V18.361H35.721V29.7714Z" fill="white"></path><path d="M123.704 28.8205C122.413 26.4549 120.059 25.0323 116.935 25.0323C112.371 25.0323 107.837 28.0408 107.837 34.8765C107.837 41.7278 112.371 44.702 116.96 44.702C120.136 44.702 122.569 43.2775 123.461 40.8062V43.8665C123.461 47.459 121.973 49.4196 117.817 49.4196C114.411 49.4196 112.943 48.1135 112.61 45.5933H107.964C108.405 50.214 111.773 53.0003 117.692 53.0003C124.234 53.0003 127.64 49.5947 127.64 43.6434V25.409H124.469L123.704 28.8205ZM117.776 41.1418C114.727 41.1418 111.991 39.416 111.991 34.895C111.991 30.3859 114.727 28.6376 117.776 28.6376C120.824 28.6376 123.572 30.3497 123.572 34.8579C123.572 39.3788 120.825 41.1418 117.776 41.1418Z" fill="white"></path></g></g><defs><clipPath id="clip0_495_4399"><rect width="145.568" height="35" fill="white" transform="translate(17 18)"></rect></clipPath><clipPath id="clip1_495_4399"><rect width="145.568" height="35.0003" fill="white" transform="translate(17 18)"></rect></clipPath></defs></svg>'},"GK/9":function(e){e.exports=JSON.parse('{"sw-order":{"list":{"heylight_reference":"HeyLight Reference"}}}')},LYrj:function(e){e.exports=JSON.parse('{"sw-order":{"list":{"heylight_reference":"HeyLight Reference"}}}')},P8hj:function(e,t,n){"use strict";function r(e,t){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i],s=o[0],a={id:e+":"+i,css:o[1],media:o[2],sourceMap:o[3]};r[s]?r[s].parts.push(a):n.push(r[s]={id:s,parts:[a]})}return n}n.r(t),n.d(t,"default",(function(){return h}));var i="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!i)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var o={},s=i&&(document.head||document.getElementsByTagName("head")[0]),a=null,c=0,l=!1,u=function(){},d=null,f="data-vue-ssr-id",p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function h(e,t,n,i){l=n,d=i||{};var s=r(e,t);return g(s),function(t){for(var n=[],i=0;i<s.length;i++){var a=s[i];(c=o[a.id]).refs--,n.push(c)}t?g(s=r(e,t)):s=[];for(i=0;i<n.length;i++){var c;if(0===(c=n[i]).refs){for(var l=0;l<c.parts.length;l++)c.parts[l]();delete o[c.id]}}}}function g(e){for(var t=0;t<e.length;t++){var n=e[t],r=o[n.id];if(r){r.refs++;for(var i=0;i<r.parts.length;i++)r.parts[i](n.parts[i]);for(;i<n.parts.length;i++)r.parts.push(m(n.parts[i]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{var s=[];for(i=0;i<n.parts.length;i++)s.push(m(n.parts[i]));o[n.id]={id:n.id,refs:1,parts:s}}}}function y(){var e=document.createElement("style");return e.type="text/css",s.appendChild(e),e}function m(e){var t,n,r=document.querySelector("style["+f+'~="'+e.id+'"]');if(r){if(l)return u;r.parentNode.removeChild(r)}if(p){var i=c++;r=a||(a=y()),t=w.bind(null,r,i,!1),n=w.bind(null,r,i,!0)}else r=y(),t=S.bind(null,r),n=function(){r.parentNode.removeChild(r)};return t(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap)return;t(e=r)}else n()}}var b,v=(b=[],function(e,t){return b[e]=t,b.filter(Boolean).join("\n")});function w(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=v(t,i);else{var o=document.createTextNode(i),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(o,s[t]):e.appendChild(o)}}function S(e,t){var n=t.css,r=t.media,i=t.sourceMap;if(r&&e.setAttribute("media",r),d.ssrId&&e.setAttribute(f,t.id),i&&(n+="\n/*# sourceURL="+i.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},PT3M:function(e,t,n){var r=n("4uyt");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n("P8hj").default)("e38a7610",r,!0,{})},SNkY:function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,s=void 0,s=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(s)?s:String(s)),i)}var o,s}function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=Shopware.Application,u=Shopware.Classes.ApiService,d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,e);var t,n,a,c=s(l);function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"heylight_settings_service";return r(this,l),c.call(this,e,t,n)}return t=l,(n=[{key:"validateApiCredentials",value:function(e){var t=this.getBasicHeaders();return this.httpClient.post("_action/".concat(this.getApiBasePath(),"/validate-api-credentials"),{merchant_key:e},{headers:t}).then((function(e){return u.handleResponse(e)}))}}])&&i(t.prototype,n),a&&i(t,a),Object.defineProperty(t,"prototype",{writable:!1}),l}(u);l.addServiceProvider("HeyLightSettingsService",(function(e){var t=l.getContainer("init");return new d(t.httpClient,e.loginService)}))},Sjmz:function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,s=void 0,s=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(s)?s:String(s)),i)}var o,s}function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=Shopware.Application,u=Shopware.Classes.ApiService,d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,e);var t,n,a,c=s(l);function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"heylight_order_service";return r(this,l),c.call(this,e,t,n)}return t=l,(n=[{key:"submitRefund",value:function(e){var t=this.getBasicHeaders();return this.httpClient.post("_action/".concat(this.getApiBasePath(),"/refund"),{transaction:e},{headers:t}).then((function(e){return u.handleResponse(e)}))}}])&&i(t.prototype,n),a&&i(t,a),Object.defineProperty(t,"prototype",{writable:!1}),l}(u);l.addServiceProvider("HeyLightOrderService",(function(e){var t=l.getContainer("init");return new d(t.httpClient,e.loginService)}))},"V/R6":function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,s=void 0,s=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===r(s)?s:String(s)),i)}var o,s}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.r(t);var u,d=Shopware.Classes.ApiService,f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(l,e);var t,n,r,c=a(l);function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"heylight_api_service";return i(this,l),c.call(this,e,t,n)}return t=l,(n=[{key:"get",value:function(e){return this.httpClient.get("_action/".concat(this.getApiBasePath()).concat(e),{headers:this.getBasicHeaders()}).then((function(e){return d.handleResponse(e)}))}},{key:"post",value:function(e,t){return this.httpClient.post("_action/".concat(this.getApiBasePath()).concat(e),t,{headers:this.getBasicHeaders()}).then((function(e){return d.handleResponse(e)}))}}])&&o(t.prototype,n),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(d),p=(n("SNkY"),n("Sjmz"),(u=n("4UUi")).keys().reduce((function(e,t){var n={name:t.split(".")[1].split("/")[1],functional:!0,render:function(e,n){var r=n.data;return e("span",{class:[r.staticClass,r.class],style:r.style,attrs:r.attrs,on:r.on,domProps:{innerHTML:u(t)}})}};return e.push(n),e}),[])),h=Shopware.Component;p.map((function(e){return h.register(e.name,e)}));Shopware.Component.register("heylight-settings-icon",{template:'{% block heylight_settings_icon %}\n    <icons-heylight-color class="sw-icon"></icons-heylight-color>\n{% endblock %}\n'});n("bMya");Shopware.Component.override("sw-settings-index",{template:'{% block sw_settings_content_card_slot_plugins %}\n    {% parent %}\n\n    <sw-settings-item :label="$tc(\'HeyLight.mainMenuItemGeneral\')"\n                      :to="{ name: \' heylight.settings.index\' }"\n                      :backgroundEnabled="false">\n        <template #icon>\n            <img class="sw-settings-index__heidipay-icon" :src="\'heylight/administration/plugin.png\' | asset">\n        </template>\n    </sw-settings-item>\n{% endblock %}\n'});n("PT3M");function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,s,a=[],c=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var m=Shopware,b=m.Component,v=m.Mixin;b.register("heylight-settings",{template:'{% block heylight_settings %}\n<sw-page class="heylight-settings">\n    {% block heylight_settings_header %}\n    <template slot="smart-bar-header">\n        <h2>\n            {{ $tc(\'sw-settings.index.title\') }}\n            <sw-icon name="small-arrow-medium-right" small></sw-icon>\n            {{ $tc(\'HeyLight.mainMenuItemGeneral\') }}\n        </h2>\n    </template>\n    {% endblock %}\n    {% block heylight_actions %}\n    <template #smart-bar-actions>\n        {% block heylight_settings_actions_feedback %}\n        <sw-button\n            @click="isSupportModalOpen = true"\n            :disabled="false"\n            variant="ghost"\n            :square="false"\n            :block="false"\n            :isLoading="false">\n            {{ $tc(\'HeyLight.supportModal.supportButton\') }}\n        </sw-button>\n        {% endblock %}\n        {% block heylight_settings_actions_test %}\n        <sw-button-process @click="onTest"\n                           :isLoading="isTesting"\n                           :processSuccess="isTestSuccessful"\n                           :disabled="isLoading">\n            {{ $tc(\'HeyLight.settingsForm.test\') }}\n        </sw-button-process>\n        {% endblock %}\n\n\n        {% block heylight_settings_actions_save %}\n        <sw-button-process\n            class="sw-settings-login-registration__save-action"\n            :isLoading="isLoading"\n            :processSuccess="isSaveSuccessful"\n            :disabled="isLoading || isTesting"\n            variant="primary"\n            @process-finish="saveFinish"\n            @click="onSave">\n            {{ $tc(\'HeyLight.settingsForm.save\') }}\n        </sw-button-process>\n        {% endblock %}\n    </template>\n    {% endblock %}\n    {% block heylight_settings_content %}\n    <template #content>\n        <sw-modal\n            v-if="isSupportModalOpen"\n            @modal-close="isSupportModalOpen = false"\n            :title="$tc(\'HeyLight.supportModal.title\')"\n            class="heidpay-support sw-modal--medium">\n            <sw-container columns="1fr 1fr">\n                <div class="heidpay-support__col">\n                    <div class="heidpay-support__icon">\n                        <sw-icon name="regular-file" :large="true"></sw-icon>\n                    </div>\n                    <p class="heidpay-support__desc">\n                        {{ $tc(\'HeyLight.supportModal.manualDesc\') }}\n                    </p>\n                    <sw-button\n                        :disabled="false"\n                        variant="primary"\n                        :square="false"\n                        :block="false"\n                        :isLoading="false"\n                        link="https://www.heidipay.com/de-ch/">\n                        {{ $tc(\'HeyLight.supportModal.manualButton\') }}\n                    </sw-button>\n                </div>\n                <div class="heidpay-support__col">\n                    <div class="heidpay-support__icon">\n                        <sw-icon name="regular-headset" :large="true"></sw-icon>\n                    </div>\n                    <p class="heidpay-support__desc">\n                        {{ $tc(\'HeyLight.supportModal.supportDesc\') }}\n                    </p>\n                    <sw-button\n                        :disabled="false"\n                        variant="primary"\n                        :square="false"\n                        :block="false"\n                        :isLoading="false"\n                        link="mailto:kontakt@go2flow.ch">\n                        {{ $tc(\'HeyLight.supportModal.supportButton\') }}\n                    </sw-button>\n                </div>\n            </sw-container>\n        </sw-modal>\n\n        <sw-card-view>\n            <div class="sw-system-config">\n                <div  class="sw-system-config__global-sales-channel-switch">\n                    <h3>{{ $tc(\'HeyLight.settingsForm.attention\') }}</h3>\n                    <p style="margin-bottom: 10px;">{{ $tc(\'HeyLight.settingsForm.attentionText\') }}</p>\n                    <p style="margin-bottom: 10px;">{{ $tc(\'HeyLight.settingsForm.descriptionWebservice\') }}</p>\n                    <p style="margin-bottom: 10px;"><a href="https://merchant-portal.heidipay.com/auth/login" target="_blank" rel="noopener nofollow">Merchant-Portal</a> </p>\n                </div>\n            </div>\n            <sw-system-config\n                    ref="systemConfig"\n                    domain="Go2FlowHeyLightPayment.settings"\n                    sales-channel-switchable\n                    :sales-channel-id="salesChannelId"\n            />\n        </sw-card-view>\n    </template>\n    {% endblock %}\n</sw-page>\n{% endblock %}\n\n',mixins:[v.getByName("notification"),v.getByName("sw-inline-snippet")],inject:["HeyLightSettingsService"],data:function(){return{isLoading:!1,isTesting:!1,isSaveSuccessful:!1,isTestSuccessful:!1,secretKey:!1,isSupportModalOpen:!1,validations:{secretKey:{required:!0},promotionPublicApiKey:{required:!0},romotionWidgetFee:{required:!0},promotionProductMode:{required:!0},promotionTerms:{required:!0},promotionTermsCredit:{required:!0}}}},methods:{saveFinish:function(){this.isSaveSuccessful=!1},onSave:function(){var e=this;this.isLoading=!0;var t=this.validateConfig();if(t.length)return this.createNotificationsForValidation(t),void(this.isLoading=!1);this.isSaveSuccessful=!1,this.$refs.systemConfig.saveAll().then((function(){e.isLoading=!1,e.isSaveSuccessful=!0})).catch((function(){e.isLoading=!1}))},onTest:function(){var e=this;this.isTesting=!0,this.isTestSuccessful=!1;var t=this.getConfigValue("secretKey");this.HeyLightSettingsService.validateApiCredentials(t).then((function(t){var n=t.credentialsValid;t.error;n?(e.createNotificationSuccess({title:e.$tc("HeyLight.settingsForm.messages.titleSuccess"),message:e.$tc("HeyLight.settingsForm.messages.messageTestSuccess")}),e.isTestSuccessful=!0):e.createNotificationError({title:e.$tc("HeyLight.settingsForm.messages.titleError"),message:e.$tc("HeyLight.settingsForm.messages.messageTestError")}),e.isTesting=!1})).catch((function(t){e.createNotificationError({title:e.$tc("HeyLight.settingsForm.messages.titleError"),message:e.$tc("HeyLight.settingsForm.messages.messageTestErrorGeneral")}),e.isTesting=!1}))},createNotificationsForValidation:function(e){var t=this;e.forEach((function(e){var n="",r=t.$tc("HeyLight.settingsForm.fields."+e.field);e.errors.forEach((function(e){n=n+" "+t.$tc("HeyLight.settingsForm.messages."+e,{field:r})})),t.createNotificationError({title:t.$tc("HeyLight.settingsForm.messages.titleError"),message:n})}))},validateConfig:function(){for(var e=[],t=0,n=Object.entries(this.$refs.systemConfig.actualConfigData);t<n.length;t++)for(var r=g(n[t],2),i=r[0],o=r[1],s=0,a=Object.entries(this.validations);s<a.length;s++){var c=g(a[s],2),l=c[0],u=c[1],d=[],f=o["Go2FlowHeyLightPayment.settings.".concat(l)];u.required&&(this.isSet(f,"null"!==i)||d.push("required")),d.length&&e.push({sci:i,field:l,errors:d})}return e},isSet:function(e,t){return""!==e&&(null!==e||t)&&(!Array.isArray(e)||e.length)},getConfigValue:function(e){var t=this.$refs.systemConfig.actualConfigData.null,n=this.$refs.systemConfig.currentSalesChannelId;return(null===n?t:this.$refs.systemConfig.actualConfigData[n])["Go2FlowHeyLightPayment.settings.".concat(e)]||t["Go2FlowHeyLightPayment.settings.".concat(e)]}}});var w=Shopware,S=w.Component,_=w.Mixin,C=(w.State,w.Context),H=Shopware.Component.getComponentHelper(),P=(H.mapPropertyErrors,H.mapGetters,H.mapState,Shopware.Data.Criteria);Shopware.Utils;S.register("heylight-order-detail",{template:'{% block maximizly_shipping_detail %}\n\n<div class="sw-order-detail-heylight">\n    <sw-card :title="$tc(\'HeyLight.order.detail.actions\')">\n        <sw-button-process\n            class=""\n            :isLoading="isLoading"\n            :disabled="isLoading || !buttonEnabled"\n            variant="primary"\n            @click.prevent="submitRefund">\n            {{ $tc(\'HeyLight.order.detail.actions_refund\') }}\n        </sw-button-process>\n    </sw-card>\n</div>\n\n{% endblock %}\n',inject:["repositoryFactory","HeyLightOrderService"],mixins:[_.getByName("notification")],metaInfo:function(){return{title:"HeyLight"}},data:function(){return{isLoading:!0,transaction:null}},computed:{buttonEnabled:function(){return!(null===this.transaction||"cancelled"===this.transaction.stateMachineState.technicalName||"refunded"===this.transaction.stateMachineState.technicalName||this.transaction.amount.totalPrice<=0)}},created:function(){this.loadOrderData()},methods:{submitRefund:function(){var e=this;this.isLoading=!0,this.HeyLightOrderService.submitRefund(this.$route.params.transaction).then((function(t){t.success?e.createNotificationSuccess({title:e.$tc("HeyLight.order.messages.refundSuccessTitle"),message:e.$tc("HeyLight.order.messages.refundSuccessMessage")}):e.createNotificationError({title:e.$tc("HeyLight.order.messages.refundErrorTitle"),message:e.$tc("HeyLight.order.messages.refundErrorMessage")})})).catch((function(e){console.error(e)})).finally((function(){e.loadOrderData()}))},loadOrderData:function(){var e=this,t=this.repositoryFactory.create("order_transaction"),n=new P(1,1);return n.addAssociation("order"),n.addAssociation("order.lineItems"),n.addAssociation("stateMachineState"),t.get(this.$route.params.transaction,C.api,n).then((function(t){e.transaction=t,e.isLoading=!1}))}}});var L=n("bp0g"),k=n("2Ajb");Shopware.Module.register("heylight-heylight",{type:"plugin",name:"HeyLight",title:"HeyLight.mainMenuItemGeneral",version:"1.0.0",targetVersion:"1.0.0",color:"#2b52ff",icon:"regular-cog",snippets:{"de-DE":L,"de-CH":L,"en-GB":k},routes:{index:{component:"heylight-settings",path:"index",meta:{parentPath:"sw.settings.index"}}},settingsItem:{name:"heylight-settings",group:"plugins",to:"heylight.heylight.index",iconComponent:"heylight-settings-icon",backgroundEnabled:!0},routeMiddleware:function(e,t){"sw.order.detail"===t.name&&t.children.push({component:"heylight-order-detail",name:"heylight.order.detail",path:"/sw/order/detail/:id/heylight/:transaction",meta:{parentPath:"sw.order.index",privilege:"order.viewer"}}),e(t)}});var T=n("GK/9"),O=n("LYrj");Shopware.Component;Shopware.Locale.extend("de-DE",T),Shopware.Locale.extend("en-GB",O),Shopware.Component.override("sw-order-list",{template:'{% block sw_order_list_grid_columns %}\n    {% parent() %}\n\n    {% block sw_order_list_grid_columns_heylight_reference %}\n        <template #column-id="{ item }">\n            {{ getExternalPayReference(item)}}\n        </template>\n    {% endblock %}\n\n{% endblock %}',methods:{getOrderColumns:function(){var e=this.$super("getOrderColumns");return e.push({property:"id",label:"sw-order.list.heylight_reference",align:"left"}),e},getExternalPayReference:function(e){if(e.transactions.length&&e.transactions.find((function(e){return e.customFields&&e.customFields.external_contract_uuid})))return"HL_"+e.orderNumber;return"-"}}});var M=Shopware,E=M.Component,j=M.Context,A=Shopware.Data.Criteria;E.override("sw-order-detail",{template:'{% block sw_order_detail_content_tabs_general %}\n    {% parent %}\n\n    <template v-for="transaction in heylightTransactions">\n        {% block heylight_payment_payment_tab %}\n            <sw-tabs-item :route="{ name: \'heylight.order.detail\', params: { id: $route.params.id, transaction: transaction.id } }" title="HeyLight">\n                {{ $tc(\'HeyLight.order.detail.tab\') }}\n            </sw-tabs-item>\n        {% endblock %}\n    </template>\n\n{% endblock %}\n',data:function(){return{heylightTransactions:[]}},watch:{orderId:{deep:!0,handler:function(){this.heylightTransactions=[],this.orderId&&this.loadOrderData()},immediate:!0}},methods:{loadOrderData:function(){var e=this,t=this.repositoryFactory.create("order"),n=new A(1,1);return n.addAssociation("transactions"),n.addAssociation("transactions.paymentMethod"),t.get(this.$route.params.id,j.api,n).then((function(t){e.loadTransactions(t)}))},loadTransactions:function(e){var t=this;e.transactions.forEach((function(e){"heylight_heylight"===e.paymentMethod.technicalName&&t.heylightTransactions.push(e)}))}}});var x=Shopware.Application,R=x.getContainer("init");x.addServiceProvider("HeyLightAPIService",(function(e){return new f(R.httpClient,e.loginService)}))},bMya:function(e,t,n){var r=n("9ogd");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n("P8hj").default)("bfb21c2a",r,!0,{})},bp0g:function(e){e.exports=JSON.parse('{"HeyLight":{"mainMenuItemGeneral":"HeyLight","module":{"title":"HeyLight","description":"Buy now, pay later."},"settingsForm":{"title":"HeyLight","test":"Teste den API-Zugang","save":"Speichern","attention":"Wichtig","attentionText":"Damit das Plugin funktioniert, müssen alle * Pflichtfelder ausgefüllt und die korrekten Adressdaten hinterlegt sein.","descriptionWebservice":"Den Secret Key bekommen Sie direkt von HeyLight zugewiesen und zugeschickt. Falls Sie diese noch nicht beantragt oder zugeschickt bekommen haben, können Sie diese unter nachfolgendem Link bestellen: ","fields":{"secretKey":"Secret API Key","promotionPublicApiKey":"Public API Key","promotionWidgetFee":"Gebühr","promotionProductMode":"Werbebotschaft Produkt","promotionTerms":"Anzahl der Raten (BNPL)","promotionTermsCredit":"Anzahl der Raten (Credit)"},"messages":{"required":"{field} darf nicht leer sein.","messageNotBlank":"Dieses Feld darf nicht leer sein.","titleSuccess":"Erfolg","titleError":"Fehler","titleMissing":"Pflichtfelder fehlen","messageMissing":"Bitte füllen Sie alle Pflichtfelder aus.","messageTestSuccess":"Die API-Zugangsdaten sind korrekt.","messageTestError":"Die API-Zugangsdaten sind falsch.","messageTestErrorGeneral":"Die API-Zugangsdaten konnten nicht verifiziert werden.","messageTestTitleEmpty":"Die API-Zugangsdaten sind leer.","messageTestErrorEmpty":"Die API-Zugangsdaten dürfen nicht leer sein.","messageSaveSuccess":"Die Plugin-Einstellungen wurden gespeichert.","messageSaveError":"Die Plugin-Einstellungen konnten nicht gespeichert werden."}},"supportModal":{"supportButton":"Support","title":"Wie können wir Ihnen helfen?","supportDesc":"Kontaktieren Sie unser Support-Team","manualButton":"Dokumentation","manualDesc":"Lesen Sie unsere Integrations Anleitung"},"order":{"detail":{"actions":"Aktionen","actions_refund":"Rückerstatten","tab":"HeyLight"},"messages":{"refundSuccessTitle":"Rückerstattung erfolgreich!","refundSuccessMessage":"Die Rückerstattung wurde erfolgreich verarbeitet","refundErrorTitle":"Rückerstattung fehlgeschlagen!","refundErrorMessage":"Bitte versuchen Sie es erneut oder wenden Sie sich an den HeyLight-Support"}}}}')}});
//# sourceMappingURL=go2-flow-hey-light-payment.js.map